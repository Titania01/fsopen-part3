(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var o=n(2),c=n.n(o),r=n(15),a=n.n(r),i=n(6),s=n(4),u=n(3),l=n.n(u),f=n(0),j=function(t){var e=t.note,n=t.toggleImportance,o=e.important?"make not important":"make important";return Object(f.jsxs)("li",{className:"note",children:[e.content,Object(f.jsx)("button",{onClick:n,children:o})]})},d=function(t){var e=t.message;return null===e?e:Object(f.jsx)("div",{className:"error",children:e})},b=function(){return Object(f.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(f.jsx)("br",{}),Object(f.jsx)("em",{children:"Note app, Department of Computer Science, University of Helsinki 2021"})]})},h="/api/notes",p=function(){var t=Object(o.useState)([]),e=Object(s.a)(t,2),n=e[0],c=e[1],r=Object(o.useState)(""),a=Object(s.a)(r,2),u=a[0],p=a[1],m=Object(o.useState)(!0),O=Object(s.a)(m,2),g=O[0],v=O[1],x=Object(o.useState)("some error message..."),S=Object(s.a)(x,2),k=S[0],y=S[1];Object(o.useEffect)((function(){(function(){var t=l.a.get(h),e={id:1e4,content:"This note is not saved to server",date:"2019-05-30T17:30:31.098z",important:!0};return t.then((function(t){return t.data.concat(e)}))})().then((function(t){c(t)}))}),[]);var w=function(t){var e="http://localhost:3001/notes/".concat(t),o=n.find((function(e){return e.id===t})),r=Object(i.a)(Object(i.a)({},o),{},{important:!o.important});(function(t,e){return l.a.put("".concat(h,"/").concat(t),e).then((function(t){return t.data}))})(t,r).then((function(e){c(n.map((function(n){return n.id!==t?n:e})))})).catch((function(e){y("Note '".concat(o.content,"' was already deleted from server")),setTimeout((function(){y(null)}),5e3),c(n.filter((function(e){return e.id!==t})))})),l.a.put(e,r).then((function(e){c(n.map((function(n){return n.id!==t?n:e.data})))})),console.log("importance of ".concat(t," needs to be toggled"))};Object(o.useEffect)((function(){console.log("effect"),l.a.get("http://localhost:3001/notes").then((function(t){console.log("promise fufilled"),c(t.data)}))}),[]),console.log("render",n.length,"notes");var N=g?n:n.filter((function(t){return!0===t.important}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Notes"}),Object(f.jsx)(d,{message:k}),Object(f.jsx)("div",{children:Object(f.jsxs)("button",{onClick:function(){return v(!g)},children:["show ",g?"important":"all"]})}),Object(f.jsx)("ul",{children:N.map((function(t,e){return Object(f.jsx)(j,{note:t,toggleImportance:function(){return w(t.id)}},e)}))}),Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault();var e,o={content:u,date:(new Date).toISOString(),important:Math.random()<.5};(e=o,l.a.post(h,e).then((function(t){return t.data}))).then((function(t){c(n.concat(t)),p("")})),l.a.post("http://localhost:3001/notes",o).then((function(t){console.log(t),c(n.concat(t.data)),p("")}))},children:[Object(f.jsx)("input",{value:u,onChange:function(t){console.log(t.target.value),p(t.target.value)}}),Object(f.jsx)("button",{type:"submit",children:"save"})]}),Object(f.jsx)(b,{})]})};n(39);a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f538cb54.chunk.js.map